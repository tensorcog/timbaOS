"use strict";(()=>{var e={};e.id=737,e.ids=[737],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},38494:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>v,patchFetch:()=>h,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>m,staticGenerationAsyncStorage:()=>l});var o={};t.r(o),t.d(o,{GET:()=>c});var s=t(49303),i=t(88716),n=t(60670),a=t(87070),p=t(13538);async function c(e){let r=e.nextUrl.searchParams,t=r.get("q")||"",o=r.get("locationId");if(!o)return a.NextResponse.json({error:"Location ID required"},{status:400});try{let e=(await p.Z.product.findMany({where:{isActive:!0,OR:[{name:{contains:t,mode:"insensitive"}},{sku:{contains:t,mode:"insensitive"}}],inventory:{some:{locationId:o,stockLevel:{gt:0}}}},include:{inventory:{where:{locationId:o},select:{stockLevel:!0}},pricing:{where:{locationId:o},select:{price:!0}}},take:50})).map(e=>({id:e.id,name:e.name,sku:e.sku,price:e.pricing[0]?.price?parseFloat(e.pricing[0].price.toString()):parseFloat(e.basePrice.toString()),stockLevel:e.inventory[0]?.stockLevel||0}));return a.NextResponse.json(e)}catch(e){return console.error("Product search error:",e),a.NextResponse.json({error:"Search failed"},{status:500})}}let u=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/pos/products/route",pathname:"/api/pos/products",filename:"route",bundlePath:"app/api/pos/products/route"},resolvedPagePath:"/home/monty/spruce-killer/src/app/api/pos/products/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:m}=u,v="/api/pos/products/route";function h(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:l})}},13538:(e,r,t)=>{t.d(r,{Z:()=>s});var o=t(53524);let s=globalThis.prisma??new o.PrismaClient}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[276,972],()=>t(38494));module.exports=o})();