(()=>{var e={};e.id=968,e.ids=[968],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},79791:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>d.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>n,routeModule:()=>h,tree:()=>c}),s(85171),s(89259),s(68269),s(35866);var a=s(23191),r=s(88716),l=s(37922),d=s.n(l),o=s(95231),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);s.d(t,i);let c=["",{children:["dashboard",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,85171)),"/home/monty/spruce-killer/src/app/dashboard/checkout/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,89259)),"/home/monty/spruce-killer/src/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,68269)),"/home/monty/spruce-killer/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],n=["/home/monty/spruce-killer/src/app/dashboard/checkout/page.tsx"],m="/dashboard/checkout/page",u={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/checkout/page",pathname:"/dashboard/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},60173:(e,t,s)=>{Promise.resolve().then(s.bind(s,59981))},62881:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(17577);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=(...e)=>e.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ");var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:o="",children:i,iconNode:c,...n},m)=>(0,a.createElement)("svg",{ref:m,...d,width:t,height:t,stroke:e,strokeWidth:r?24*Number(s)/Number(t):s,className:l("lucide",o),...n},[...c.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(i)?i:[i]])),i=(e,t)=>{let s=(0,a.forwardRef)(({className:s,...d},i)=>(0,a.createElement)(o,{ref:i,iconNode:t,className:l(`lucide-${r(e)}`,s),...d}));return s.displayName=`${e}`,s}},97147:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]])},6507:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},32933:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},85529:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]])},71821:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},36283:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},95920:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},43727:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]])},77636:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},11019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},15210:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Package2",[["path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z",key:"1ront0"}],["path",{d:"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9",key:"19h2x1"}],["path",{d:"M12 3v6",key:"1holv5"}]])},48705:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},83855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},88307:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},88378:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},57671:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},1572:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},98091:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},79635:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},24061:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},94019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},90434:(e,t,s)=>{"use strict";s.d(t,{default:()=>r.a});var a=s(79404),r=s.n(a)},35047:(e,t,s)=>{"use strict";var a=s(77389);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},59981:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var a=s(10326),r=s(40173),l=s(96535),d=s(17577),o=s(79635),i=s(94019),c=s(88307),n=s(83855);function m({customer:e,onSelectCustomer:t}){let[s,r]=(0,d.useState)(!1),[l,m]=(0,d.useState)(""),[u,h]=(0,d.useState)([]),[x,p]=(0,d.useState)(!1),[b,y]=(0,d.useState)({name:"",email:"",phone:""}),g=async e=>{if(e.length<2){h([]);return}try{let t=await fetch(`/api/pos/customers?q=${encodeURIComponent(e)}`),s=await t.json();h(s)}catch(e){console.error("Failed to search customers:",e)}},f=e=>{m(e);let t=setTimeout(()=>g(e),300);return()=>clearTimeout(t)},j=async()=>{try{let e=await fetch("/api/pos/customers/walk-in",{method:"POST"}),s=await e.json();t(s),r(!1)}catch(e){console.error("Failed to create walk-in customer:",e)}},v=async()=>{try{let e=await fetch("/api/pos/customers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),s=await e.json();t(s),p(!1),r(!1),y({name:"",email:"",phone:""})}catch(e){console.error("Failed to create customer:",e)}};return e&&!s?a.jsx("div",{className:"rounded-xl border bg-card p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center",children:a.jsx(o.Z,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-semibold",children:e.name}),a.jsx("div",{className:"text-sm text-muted-foreground",children:e.email}),e.taxExempt&&a.jsx("div",{className:"text-xs text-green-600 font-medium",children:"Tax Exempt"})]})]}),a.jsx("button",{onClick:()=>{t(null),r(!0)},className:"text-muted-foreground hover:text-foreground p-1",children:a.jsx(i.Z,{className:"h-4 w-4"})})]})}):x?(0,a.jsxs)("div",{className:"rounded-xl border bg-card p-4",children:[a.jsx("h3",{className:"font-semibold mb-4",children:"New Customer"}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("input",{type:"text",placeholder:"Name *",value:b.name,onChange:e=>y({...b,name:e.target.value}),className:"w-full px-3 py-2 rounded border bg-background"}),a.jsx("input",{type:"email",placeholder:"Email *",value:b.email,onChange:e=>y({...b,email:e.target.value}),className:"w-full px-3 py-2 rounded border bg-background"}),a.jsx("input",{type:"tel",placeholder:"Phone",value:b.phone,onChange:e=>y({...b,phone:e.target.value}),className:"w-full px-3 py-2 rounded border bg-background"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:v,disabled:!b.name||!b.email,className:"flex-1 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:"Create"}),a.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 rounded border hover:bg-muted",children:"Cancel"})]})]})]}):(0,a.jsxs)("div",{className:"rounded-xl border bg-card p-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Customer"}),(0,a.jsxs)("div",{className:"relative mb-3",children:[a.jsx(c.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx("input",{type:"text",placeholder:"Search by name, email, or phone...",value:l,onChange:e=>f(e.target.value),onFocus:()=>r(!0),className:"w-full pl-9 pr-3 py-2 rounded border bg-background text-sm"})]}),u.length>0&&a.jsx("div",{className:"mb-3 max-h-40 overflow-auto space-y-1",children:u.map(e=>(0,a.jsxs)("button",{onClick:()=>{t(e),r(!1),m(""),h([])},className:"w-full text-left p-2 rounded hover:bg-muted text-sm",children:[a.jsx("div",{className:"font-medium",children:e.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:e.email})]},e.id))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:j,className:"flex-1 py-2 rounded border hover:bg-muted text-sm",children:"Walk-in"}),(0,a.jsxs)("button",{onClick:()=>p(!0),className:"flex-1 py-2 rounded border hover:bg-muted text-sm flex items-center justify-center gap-1",children:[a.jsx(n.Z,{className:"h-4 w-4"}),"New"]})]})]})}var u=s(71821),h=s(62881);let x=(0,h.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var p=s(32933);let b=(0,h.Z)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),y=[{id:"CASH",label:"Cash",icon:u.Z},{id:"CREDIT_CARD",label:"Credit Card",icon:x},{id:"DEBIT_CARD",label:"Debit Card",icon:x},{id:"CHECK",label:"Check",icon:p.Z},{id:"STORE_CREDIT",label:"Store Credit",icon:b}];function g({cart:e,customer:t,locationId:s,onComplete:r,onCancel:l}){let[o,c]=(0,d.useState)([]),[n,m]=(0,d.useState)("CASH"),[u,h]=(0,d.useState)(""),[x,p]=(0,d.useState)(""),[b,g]=(0,d.useState)(!1),f=e.reduce((e,t)=>e+(t.price*t.quantity-t.discount),0),j=o.reduce((e,t)=>e+t.amount,0),v=f-j,k=e=>{c(o.filter((t,s)=>s!==e))},N=async()=>{if(v>.01){alert("Payment incomplete");return}g(!0);try{let a=await fetch("/api/pos/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:t.id,locationId:s,items:e.map(e=>({productId:e.productId,quantity:e.quantity,price:e.price,discount:e.discount})),payments:o})});if(a.ok){let e=await a.json();alert(`Order ${e.orderNumber} completed!`),r()}else alert("Failed to process order")}catch(e){console.error("Checkout error:",e),alert("Failed to process order")}finally{g(!1)}},w="CASH"===n&&x?parseFloat(x)-v:0;return a.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:a.jsx("div",{className:"bg-card rounded-xl border max-w-2xl w-full max-h-[90vh] overflow-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Payment"}),a.jsx("button",{onClick:l,className:"p-2 hover:bg-muted rounded-full",children:a.jsx(i.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"mb-6 p-6 rounded-lg bg-gradient-to-r from-purple-500/20 to-blue-500/20 border",children:[a.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Amount Due"}),(0,a.jsxs)("div",{className:"text-4xl font-bold",children:["$",v.toFixed(2)]}),j>0&&(0,a.jsxs)("div",{className:"text-sm text-muted-foreground mt-2",children:["Paid: $",j.toFixed(2)," of $",f.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Payment Method"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:y.map(e=>{let t=e.icon;return(0,a.jsxs)("button",{onClick:()=>m(e.id),className:`p-3 rounded-lg border flex flex-col items-center gap-2 transition-colors ${n===e.id?"bg-purple-500/20 border-purple-500":"hover:bg-muted"}`,children:[a.jsx(t,{className:"h-5 w-5"}),a.jsx("span",{className:"text-sm",children:e.label})]},e.id)})})]}),"CASH"===n&&v>0&&(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Cash Tendered"}),a.jsx("input",{type:"number",step:"0.01",value:x,onChange:e=>p(e.target.value),className:"w-full px-4 py-3 rounded-lg border bg-background text-lg",placeholder:"0.00"}),w>0&&(0,a.jsxs)("div",{className:"mt-2 text-lg font-semibold text-green-600",children:["Change: $",w.toFixed(2)]})]}),v>0&&(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Amount"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",step:"0.01",value:u,onChange:e=>h(e.target.value),className:"flex-1 px-4 py-3 rounded-lg border bg-background",placeholder:v.toFixed(2)}),a.jsx("button",{onClick:()=>h(v.toFixed(2)),className:"px-4 py-2 rounded-lg border hover:bg-muted",children:"Exact"}),a.jsx("button",{onClick:()=>{let e=parseFloat(u);e>0&&e<=v&&(c([...o,{method:n,amount:e}]),h(""))},className:"px-6 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700",children:"Add"})]})]}),o.length>0&&(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Applied Payments"}),a.jsx("div",{className:"space-y-2",children:o.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/50",children:[a.jsx("span",{children:e.method.replace("_"," ")}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("span",{className:"font-semibold",children:["$",e.amount.toFixed(2)]}),a.jsx("button",{onClick:()=>k(t),className:"text-red-500 hover:text-red-700",children:a.jsx(i.Z,{className:"h-4 w-4"})})]})]},t))})]}),a.jsx("button",{onClick:N,disabled:v>.01||b,className:"w-full py-4 rounded-lg bg-gradient-to-r from-purple-500 to-blue-600 text-white font-bold text-lg hover:from-purple-600 hover:to-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Processing...":v>.01?`$${v.toFixed(2)} Remaining`:"Complete Transaction"})]})})})}var f=s(1572);function j(){let{items:e,addItem:t}=(0,r.j)(),[s,l]=(0,d.useState)([]),[o,i]=(0,d.useState)(!1);if(0===s.length)return null;let c=e=>{switch(e){case"frequently_bought_together":return"Customers also bought";case"project_bundle":return"Complete your project";case"upsell":return"You might also like";default:return"Recommended"}};return(0,a.jsxs)("div",{className:"rounded-xl border bg-card p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx(f.Z,{className:"h-5 w-5 text-purple-500"}),"Recommended for You"]}),o?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading recommendations..."}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:s.map(e=>(0,a.jsxs)("div",{className:"p-4 rounded-lg border bg-muted/50 hover:bg-muted transition-colors",children:[a.jsx("div",{className:"text-xs text-purple-600 font-medium mb-2",children:c(e.reason)}),a.jsx("div",{className:"font-mono text-xs text-muted-foreground mb-1",children:e.product.sku}),a.jsx("div",{className:"font-medium mb-2 line-clamp-2",children:e.product.name}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-lg font-bold text-green-600",children:["$",e.product.price.toFixed(2)]}),(0,a.jsxs)("button",{onClick:()=>t(e.product),className:"px-3 py-1.5 rounded-lg bg-gradient-to-r from-purple-500 to-blue-600 text-white text-sm font-medium hover:from-purple-600 hover:to-blue-700 transition-all flex items-center gap-1",children:[a.jsx(n.Z,{className:"h-3 w-3"}),"Add"]})]})]},e.product.id))})]})}var v=s(35047);let k=(0,h.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var N=s(57671),w=s(90434);function C(){let e=(0,v.useRouter)(),{items:t,subtotal:s,clearCart:o}=(0,r.j)(),{selectedLocation:i}=(0,l.T)(),[c,n]=(0,d.useState)(null),[u,h]=(0,d.useState)(!1),[x,p]=(0,d.useState)(.0825),b=c?.taxExempt?0:s*x;return 0===t.length?null:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx(w.default,{href:"/dashboard/products",className:"p-2 rounded-full hover:bg-muted transition-colors",children:a.jsx(k,{className:"h-5 w-5"})}),a.jsx("h1",{className:"text-2xl font-semibold",children:"Checkout"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[a.jsx(m,{customer:c,onSelectCustomer:n}),(0,a.jsxs)("div",{className:"rounded-xl border bg-card p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx(N.Z,{className:"h-5 w-5"}),"Order Summary"]}),a.jsx("div",{className:"space-y-3",children:t.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/50",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:"font-mono text-xs text-muted-foreground",children:e.sku}),a.jsx("div",{className:"font-medium",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["$",e.price.toFixed(2)," \xd7 ",e.quantity]})]}),(0,a.jsxs)("div",{className:"font-semibold",children:["$",(e.price*e.quantity-e.discount).toFixed(2)]})]},e.productId))})]})]}),a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"rounded-xl border bg-card p-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Order Total"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Subtotal:"}),(0,a.jsxs)("span",{children:["$",s.toFixed(2)]})]}),c?.taxExempt?(0,a.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[a.jsx("span",{children:"Tax (Exempt):"}),a.jsx("span",{children:"$0.00"})]}):(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{children:["Tax (",(100*x).toFixed(2),"%):"]}),(0,a.jsxs)("span",{children:["$",b.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-lg font-bold pt-2 border-t",children:[a.jsx("span",{children:"Total:"}),(0,a.jsxs)("span",{children:["$",(s+b).toFixed(2)]})]})]}),a.jsx("button",{onClick:()=>{if(!c){alert("Please select a customer");return}h(!0)},disabled:!c,className:"w-full mt-6 py-3 rounded-lg bg-gradient-to-r from-purple-500 to-blue-600 text-white font-semibold hover:from-purple-600 hover:to-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Proceed to Payment":"Select Customer First"})]})})]}),a.jsx("div",{className:"mt-6",children:a.jsx(j,{})}),u&&c&&i&&a.jsx(g,{cart:t,customer:c,locationId:i,onComplete:()=>{o(),e.push("/dashboard/orders")},onCancel:()=>h(!1)})]})}},85171:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`/home/monty/spruce-killer/src/app/dashboard/checkout/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[276,99,404,426],()=>s(79791));module.exports=a})();