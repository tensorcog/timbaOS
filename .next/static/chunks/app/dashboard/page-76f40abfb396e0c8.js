(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{48867:function(e,t,s){Promise.resolve().then(s.t.bind(s,72972,23)),Promise.resolve().then(s.bind(s,80364))},79205:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var n=s(2265);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ")};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,n.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...h}=e;return(0,n.createElement)("svg",{ref:t,...l,width:r,height:r,stroke:s,strokeWidth:o?24*Number(i)/Number(r):i,className:a("lucide",c),...h},[...u.map(e=>{let[t,s]=e;return(0,n.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let s=(0,n.forwardRef)((s,l)=>{let{className:o,...c}=s;return(0,n.createElement)(i,{ref:l,iconNode:t,className:a("lucide-".concat(r(e)),o),...c})});return s.displayName="".concat(e),s}},51817:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},82023:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(79205).Z)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},80364:function(e,t,s){"use strict";s.d(t,{AgentInterface:function(){return c}});var n=s(57437),r=s(2265);let a=(0,s(79205).Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);var l=s(82023),i=s(51817),o=s(86697);function c(){let{currentLocation:e}=(0,o.T)(),[t,s]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),u=async()=>{s(!0);try{let t=await fetch("/api/agent/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({locationId:null==e?void 0:e.id})}),s=await t.json();d(s)}catch(e){console.error(e)}finally{s(!1)}};return(0,n.jsxs)("div",{className:"rounded-xl border bg-gradient-to-br from-purple-500/10 via-blue-500/5 to-transparent backdrop-blur",children:[(0,n.jsx)("div",{className:"flex flex-col space-y-1.5 p-6",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center",children:(0,n.jsx)(a,{className:"h-5 w-5 text-white"})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{className:"font-semibold leading-none tracking-tight flex items-center gap-2",children:["AI Agent: StockWatcher",(0,n.jsx)(l.Z,{className:"h-4 w-4 text-purple-400"})]}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Autonomous inventory monitoring"})]})]})}),(0,n.jsx)("div",{className:"p-6 pt-0",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsx)("button",{onClick:u,disabled:t,className:"relative inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 bg-gradient-to-r from-purple-500 to-blue-600 text-white hover:from-purple-600 hover:to-blue-700 h-11 px-8 shadow-lg shadow-purple-500/50 hover:shadow-purple-500/70",children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Analyzing Inventory..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Z,{className:"mr-2 h-4 w-4"}),"Run Agent Now"]})}),c&&(0,n.jsxs)("div",{className:"rounded-lg bg-muted/50 p-4 border border-purple-500/20",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,n.jsx)("div",{className:"h-2 w-2 rounded-full ".concat(c.success?"bg-green-400":"bg-red-400"," animate-pulse")}),(0,n.jsx)("span",{className:"text-sm font-medium",children:c.success?"Analysis Complete":"Error"})]}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:c.message}),c.data&&c.data.length>0&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-xs font-semibold text-purple-400",children:"Low Stock Items:"}),c.data.map((e,t)=>(0,n.jsxs)("div",{className:"flex flex-col gap-1 text-xs bg-background/50 p-2 rounded",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"font-medium",children:e.product}),(0,n.jsxs)("span",{className:"text-red-400 font-semibold",children:[e.stockLevel," left"]})]}),(0,n.jsxs)("div",{className:"flex justify-between text-muted-foreground",children:[(0,n.jsxs)("span",{children:[e.location," â€¢ ",e.sku]}),(0,n.jsxs)("span",{children:["Reorder: ",e.needsRestock]})]})]},t))]})]})]})})]})}},86697:function(e,t,s){"use strict";s.d(t,{T:function(){return i},v:function(){return l}});var n=s(57437),r=s(2265);let a=(0,r.createContext)(void 0);function l(e){let{children:t}=e,[s,l]=(0,r.useState)(null),[i,o]=(0,r.useState)([]),[c,d]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/locations");if(e.ok){let t=await e.json();o(t);let s=localStorage.getItem("selectedLocationId");if(s){let e=t.find(e=>e.id===s);e?l(e):t.length>0&&l(t[0])}else t.length>0&&l(t[0])}}catch(e){console.error("Failed to load locations:",e)}finally{d(!1)}})()},[]),(0,n.jsx)(a.Provider,{value:{currentLocation:s,selectedLocation:(null==s?void 0:s.id)||null,availableLocations:i,setCurrentLocation:e=>{l(e),localStorage.setItem("selectedLocationId",e.id)},isLoading:c},children:t})}function i(){let e=(0,r.useContext)(a);if(void 0===e)throw Error("useLocation must be used within a LocationProvider");return e}}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=48867)}),_N_E=e.O()}]);