(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[577],{5993:function(e,t,s){Promise.resolve().then(s.t.bind(s,72972,23)),Promise.resolve().then(s.bind(s,8808))},79205:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var r=s(2265);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ")};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:d,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...c,width:n,height:n,stroke:s,strokeWidth:l?24*Number(i)/Number(n):i,className:a("lucide",o),...m},[...u.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),l=(e,t)=>{let s=(0,r.forwardRef)((s,c)=>{let{className:l,...o}=s;return(0,r.createElement)(i,{ref:c,iconNode:t,className:a("lucide-".concat(n(e)),l),...o})});return s.displayName="".concat(e),s}},92369:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},8808:function(e,t,s){"use strict";s.d(t,{AuditHistory:function(){return o}});var r=s(57437),n=s(2265),a=s(79205);let c=(0,a.Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var i=s(92369);let l=(0,a.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);function o(e){let{entityType:t,entityId:s}=e,[a,o]=(0,n.useState)([]),[d,u]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/audit-logs?entityType=".concat(t,"&entityId=").concat(s));if(e.ok){let t=await e.json();o(t)}}catch(e){console.error("Failed to fetch audit logs:",e)}finally{u(!1)}})()},[t,s]),d)?(0,r.jsx)("div",{className:"text-center py-4 text-muted-foreground",children:"Loading history..."}):0===a.length?(0,r.jsxs)("div",{className:"text-center py-8 text-muted-foreground border rounded-lg bg-muted/20",children:[(0,r.jsx)(c,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,r.jsx)("p",{children:"No history available"})]}):(0,r.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,r.jsxs)("div",{className:"flex gap-4 p-4 rounded-lg border bg-card",children:[(0,r.jsx)("div",{className:"mt-1 p-2 rounded-full h-fit ".concat("CREATE"===e.action?"bg-green-100 text-green-700":"UPDATE"===e.action?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"),children:(0,r.jsx)(c,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,r.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"capitalize",children:[e.action.toLowerCase(),"D"]}),(0,r.jsx)("span",{className:"text-muted-foreground font-normal text-sm",children:"by"}),(0,r.jsxs)("span",{className:"flex items-center gap-1 text-sm bg-muted px-2 py-0.5 rounded-full",children:[(0,r.jsx)(i.Z,{className:"h-3 w-3"}),e.user.name]})]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,r.jsx)(l,{className:"h-3 w-3"}),new Date(e.timestamp).toLocaleString()]})]}),(0,r.jsx)("div",{className:"space-y-1 mt-2",children:Object.entries(e.changes).map(e=>{let[t,s]=e;return(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsxs)("span",{className:"font-mono text-xs text-muted-foreground uppercase mr-2",children:[t,":"]}),void 0!==s.old&&(0,r.jsx)("span",{className:"line-through text-red-500 mr-2",children:"object"==typeof s.old?JSON.stringify(s.old):String(s.old)}),void 0!==s.old&&(0,r.jsx)("span",{className:"mr-2",children:"â†’"}),(0,r.jsx)("span",{className:"text-green-600 font-medium",children:"object"==typeof s.new?JSON.stringify(s.new):String(s.new)})]},t)})})]})]},e.id))})}}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=5993)}),_N_E=e.O()}]);