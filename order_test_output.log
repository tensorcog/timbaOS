[1A[2K[2m[WebServer] [22m [33m[1mâš [22m[39m Port 3000 is in use, trying 3001 instead.


Running 8 tests using 8 workers

[1A[2K[1/8] [chromium] â€º tests/e2e/order.spec.ts:13:9 â€º Order Validation â€º Order Creation Validation
[1A[2K[2/8] [chromium] â€º tests/e2e/order.spec.ts:24:9 â€º Order Validation â€º Order Total Calculation Validation
[1A[2K[3/8] [chromium] â€º tests/e2e/order.spec.ts:143:9 â€º Order Validation â€º Order Payment Status Validation
[1A[2K[4/8] [chromium] â€º tests/e2e/order.spec.ts:93:9 â€º Order Validation â€º Order Edit Validation
[1A[2K[5/8] [chromium] â€º tests/e2e/order.spec.ts:249:9 â€º Order Validation â€º Tax Calculation Validation
[1A[2K[6/8] [chromium] â€º tests/e2e/order.spec.ts:153:9 â€º Order Validation â€º Order Cancellation Validation
[1A[2K[7/8] [chromium] â€º tests/e2e/order.spec.ts:46:9 â€º Order Validation â€º Order Status Transitions (Confirm)
[1A[2K[8/8] [chromium] â€º tests/e2e/order.spec.ts:172:9 â€º Order Validation â€º Quote to Order Conversion Validation
[1A[2K[2m[WebServer] [22m[next-auth][warn][DEBUG_ENABLED] 
[2m[WebServer] [22mhttps://next-auth.js.org/warnings#debug_enabled

[1A[2K[chromium] â€º tests/e2e/order.spec.ts:46:9 â€º Order Validation â€º Order Status Transitions (Confirm)
[31mprisma:error[39m 
Invalid `prisma.order.create()` invocation in
/home/monty/timbaos/tests/e2e/order.spec.ts:58:42

  55     return;
  56 }
  57 
â†’ 58 const order = await prisma.order.create(
Unique constraint failed on the fields: (`id`)

[1A[2K  1) [chromium] â€º tests/e2e/order.spec.ts:46:9 â€º Order Validation â€º Order Status Transitions (Confirm) 

    PrismaClientKnownRequestError: 
    Invalid `prisma.order.create()` invocation in
    /home/monty/timbaos/tests/e2e/order.spec.ts:58:42

      55     return;
      56 }
      57 
    â†’ 58 const order = await prisma.order.create(
    Unique constraint failed on the fields: (`id`)

      56 |         }
      57 |
    > 58 |         const order = await prisma.order.create({
         |                                          ^
      59 |             data: {
      60 |                 id: `ord-${Date.now()}`,
      61 |                 orderNumber: `ORD-TEST-${Date.now()}`,
        at /home/monty/timbaos/tests/e2e/order.spec.ts:58:42
        at $n.handleRequestError (/home/monty/timbaos/node_modules/@prisma/client/runtime/library.js:121:7315)
        at $n.handleAndLogRequestError (/home/monty/timbaos/node_modules/@prisma/client/runtime/library.js:121:6623)
        at $n.request (/home/monty/timbaos/node_modules/@prisma/client/runtime/library.js:121:6307)
        at l (/home/monty/timbaos/node_modules/@prisma/client/runtime/library.js:130:9633)
        at /home/monty/timbaos/tests/e2e/order.spec.ts:58:23


[1A[2K[2m[WebServer] [22mError: Cannot find module '/home/monty/timbaos/.next/server/vendor-chunks/lib/worker.js'
[2m[WebServer] [22m[90m    at Module._resolveFilename (node:internal/modules/cjs/loader:1207:15)[39m
[2m[WebServer] [22m[90m    at Module._load (node:internal/modules/cjs/loader:1038:27)[39m
[2m[WebServer] [22m[90m    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:164:12)[39m
[2m[WebServer] [22m[90m    at MessagePort.<anonymous> (node:internal/main/worker_thread:192:26)[39m
[2m[WebServer] [22m[90m    at [nodejs.internal.kHybridDispatch] (node:internal/event_target:831:20)[39m
[2m[WebServer] [22m[90m    at MessagePort.<anonymous> (node:internal/per_context/messageport:23:28)[39m {
[2m[WebServer] [22m  code: [32m'MODULE_NOT_FOUND'[39m,
[2m[WebServer] [22m  requireStack: []
[2m[WebServer] [22m}

[1A[2K[2m[WebServer] [22m [31m[1mâ¨¯[22m[39m uncaughtException: Error: Cannot find module '/home/monty/timbaos/.next/server/vendor-chunks/lib/worker.js'
[2m[WebServer] [22m[90m    at Module._resolveFilename (node:internal/modules/cjs/loader:1207:15)[39m
[2m[WebServer] [22m[90m    at Module._load (node:internal/modules/cjs/loader:1038:27)[39m
[2m[WebServer] [22m[90m    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:164:12)[39m
[2m[WebServer] [22m[90m    at MessagePort.<anonymous> (node:internal/main/worker_thread:192:26)[39m
[2m[WebServer] [22m[90m    at [nodejs.internal.kHybridDispatch] (node:internal/event_target:831:20)[39m
[2m[WebServer] [22m[90m    at MessagePort.<anonymous> (node:internal/per_context/messageport:23:28)[39m {
[2m[WebServer] [22m  code: [32m'MODULE_NOT_FOUND'[39m,
[2m[WebServer] [22m  requireStack: []
[2m[WebServer] [22m}

[1A[2K[2m[WebServer] [22m [31m[1mâ¨¯[22m[39m uncaughtException: Error: Cannot find module '/home/monty/timbaos/.next/server/vendor-chunks/lib/worker.js'
[2m[WebServer] [22m[90m    at Module._resolveFilename (node:internal/modules/cjs/loader:1207:15)[39m
[2m[WebServer] [22m[90m    at Module._load (node:internal/modules/cjs/loader:1038:27)[39m
[2m[WebServer] [22m[90m    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:164:12)[39m
[2m[WebServer] [22m[90m    at MessagePort.<anonymous> (node:internal/main/worker_thread:192:26)[39m
[2m[WebServer] [22m[90m    at [nodejs.internal.kHybridDispatch] (node:internal/event_target:831:20)[39m
[2m[WebServer] [22m[90m    at MessagePort.<anonymous> (node:internal/per_context/messageport:23:28)[39m {
[2m[WebServer] [22m  code: [32m'MODULE_NOT_FOUND'[39m,
[2m[WebServer] [22m  requireStack: []
[2m[WebServer] [22m}

[1A[2K[2m[WebServer] [22mError: the worker thread exited
[2m[WebServer] [22m    at Worker.onWorkerExit (webpack-internal:///(rsc)/./node_modules/[4mthread-stream[24m/index.js:201:32)
[2m[WebServer] [22m[90m    at Worker.emit (node:events:524:28)[39m
[2m[WebServer] [22m[90m    at [kOnExit] (node:internal/worker:322:10)[39m
[2m[WebServer] [22m[90m    at Worker.<computed>.onexit (node:internal/worker:230:20)[39m
[2m[WebServer] [22m[90m    at Worker.callbackTrampoline (node:internal/async_hooks:130:17)[39m

[1A[2K[2m[WebServer] [22m [31m[1mâ¨¯[22m[39m uncaughtException: Error: the worker thread exited
[2m[WebServer] [22m    at Worker.onWorkerExit (webpack-internal:///(rsc)/./node_modules/[4mthread-stream[24m/index.js:201:32)
[2m[WebServer] [22m[90m    at Worker.emit (node:events:524:28)[39m
[2m[WebServer] [22m[90m    at [kOnExit] (node:internal/worker:322:10)[39m
[2m[WebServer] [22m[90m    at Worker.<computed>.onexit (node:internal/worker:230:20)[39m
[2m[WebServer] [22m[90m    at Worker.callbackTrampoline (node:internal/async_hooks:130:17)[39m

[1A[2K[2m[WebServer] [22m [31m[1mâ¨¯[22m[39m uncaughtException: Error: the worker thread exited
[2m[WebServer] [22m    at Worker.onWorkerExit (webpack-internal:///(rsc)/./node_modules/[4mthread-stream[24m/index.js:201:32)
[2m[WebServer] [22m[90m    at Worker.emit (node:events:524:28)[39m
[2m[WebServer] [22m[90m    at [kOnExit] (node:internal/worker:322:10)[39m
[2m[WebServer] [22m[90m    at Worker.<computed>.onexit (node:internal/worker:230:20)[39m
[2m[WebServer] [22m[90m    at Worker.callbackTrampoline (node:internal/async_hooks:130:17)[39m

[1A[2K[2m[WebServer] [22m[next-auth][warn][DEBUG_ENABLED] 
[2m[WebServer] [22mhttps://next-auth.js.org/warnings#debug_enabled

[1A[2K[2m[WebServer] [22mError details: {
[2m[WebServer] [22m  name: [32m'PrismaClientKnownRequestError'[39m,
[2m[WebServer] [22m  message: [32m'\n'[39m +
[2m[WebServer] [22m    [32m'Invalid `prisma.order.create()` invocation:\n'[39m +
[2m[WebServer] [22m    [32m'\n'[39m +
[2m[WebServer] [22m    [32m'\n'[39m +
[2m[WebServer] [22m    [32m'Unique constraint failed on the fields: (`orderNumber`)'[39m,
[2m[WebServer] [22m  stack: [32m'PrismaClientKnownRequestError: \n'[39m +
[2m[WebServer] [22m    [32m'Invalid `prisma.order.create()` invocation:\n'[39m +
[2m[WebServer] [22m    [32m'\n'[39m +
[2m[WebServer] [22m    [32m'\n'[39m +
[2m[WebServer] [22m    [32m'Unique constraint failed on the fields: (`orderNumber`)\n'[39m +
[2m[WebServer] [22m    [32m'    at $n.handleRequestError (/home/monty/timbaos/node_modules/@prisma/client/runtime/library.js:121:7315)\n'[39m +
[2m[WebServer] [22m    [32m'    at $n.handleAndLogRequestError (/home/monty/timbaos/node_modules/@prisma/client/runtime/library.js:121:6623)\n'[39m +
[2m[WebServer] [22m    [32m'    at $n.request (/home/monty/timbaos/node_modules/@prisma/client/runtime/library.js:121:6307)\n'[39m +
[2m[WebServer] [22m    [32m'    at async l (/home/monty/timbaos/node_modules/@prisma/client/runtime/library.js:130:9633)\n'[39m +
[2m[WebServer] [22m    [32m'    at async POST (webpack-internal:///(rsc)/./src/app/api/quotes/[id]/convert/route.ts:83:23)\n'[39m +
[2m[WebServer] [22m    [32m'    at async /home/monty/timbaos/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228\n'[39m +
[2m[WebServer] [22m    [32m'    at async eT.execute (/home/monty/timbaos/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)\n'[39m +
[2m[WebServer] [22m    [32m'    at async eT.handle (/home/monty/timbaos/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)\n'[39m +
[2m[WebServer] [22m    [32m'    at async doRender (/home/monty/timbaos/node_modules/next/dist/server/base-server.js:1366:42)\n'[39m +
[2m[WebServer] [22m    [32m'    at async cacheEntry.responseCache.get.routeKind (/home/monty/timbaos/node_modules/next/dist/server/base-server.js:1576:40)\n'[39m +
[2m[WebServer] [22m    [32m'    at async DevServer.renderToResponseWithComponentsImpl (/home/monty/timbaos/node_modules/next/dist/server/base-server.js:1496:28)\n'[39m +
[2m[WebServer] [22m    [32m'    at async DevServer.renderPageComponent (/home/monty/timbaos/node_modules/next/dist/server/base-server.js:1924:24)\n'[39m +
[2m[WebServer] [22m    [32m'    at async DevServer.renderToResponseImpl (/home/monty/timbaos/node_modules/next/dist/server/base-server.js:1962:32)\n'[39m +
[2m[WebServer] [22m    [32m'    at async DevServer.pipeImpl (/home/monty/timbaos/node_modules/next/dist/server/base-server.js:922:25)\n'[39m +
[2m[WebServer] [22m    [32m'    at async NextNodeServer.handleCatchallRenderRequest (/home/monty/timbaos/node_modules/next/dist/server/next-server.js:272:17)\n'[39m +
[2m[WebServer] [22m    [32m'    at async DevServer.handleRequestImpl (/home/monty/timbaos/node_modules/next/dist/server/base-server.js:818:17)\n'[39m +
[2m[WebServer] [22m    [32m'    at async /home/monty/timbaos/node_modules/next/dist/server/dev/next-dev-server.js:339:20\n'[39m +
[2m[WebServer] [22m    [32m'    at async Span.traceAsyncFn (/home/monty/timbaos/node_modules/next/dist/trace/trace.js:154:20)\n'[39m +
[2m[WebServer] [22m    [32m'    at async DevServer.handleRequest (/home/monty/timbaos/node_modules/next/dist/server/dev/next-dev-server.js:336:24)\n'[39m +
[2m[WebServer] [22m    [32m'    at async invokeRender (/home/monty/timbaos/node_modules/next/dist/server/lib/router-server.js:179:21)\n'[39m +
[2m[WebServer] [22m    [32m'    at async handleRequest (/home/monty/timbaos/node_modules/next/dist/server/lib/router-server.js:359:24)\n'[39m +
[2m[WebServer] [22m    [32m'    at async requestHandlerImpl (/home/monty/timbaos/node_modules/next/dist/server/lib/router-server.js:383:13)\n'[39m +
[2m[WebServer] [22m    [32m'    at async Server.requestListener (/home/monty/timbaos/node_modules/next/dist/server/lib/start-server.js:141:13)'[39m
[2m[WebServer] [22m}

[1A[2K[2m[WebServer] [22mError: the worker has exited
[2m[WebServer] [22m    at ThreadStream.write (webpack-internal:///(rsc)/./node_modules/[4mthread-stream[24m/index.js:238:19)
[2m[WebServer] [22m    at Pino.write (webpack-internal:///(rsc)/./node_modules/[4mpino[24m/lib/proto.js:243:10)
[2m[WebServer] [22m    at Pino.LOG [as error] (webpack-internal:///(rsc)/./node_modules/[4mpino[24m/lib/tools.js:65:21)
[2m[WebServer] [22m    at logApiError (webpack-internal:///(rsc)/./src/lib/api-logger.ts:12:53)
[2m[WebServer] [22m    at POST (webpack-internal:///(rsc)/./src/app/api/quotes/[id]/convert/route.ts:179:69)
[2m[WebServer] [22m    at async [90m/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
[2m[WebServer] [22m    at async eT.execute [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/compiled/next-server/app-route.runtime.dev.js:6:46851[90m)[39m
[2m[WebServer] [22m    at async eT.handle [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/compiled/next-server/app-route.runtime.dev.js:6:58760[90m)[39m
[2m[WebServer] [22m    at async doRender [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:1366:42[90m)[39m
[2m[WebServer] [22m    at async cacheEntry.responseCache.get.routeKind [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:1576:40[90m)[39m
[2m[WebServer] [22m    at async DevServer.renderToResponseWithComponentsImpl [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:1496:28[90m)[39m
[2m[WebServer] [22m    at async DevServer.renderPageComponent [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:1924:24[90m)[39m
[2m[WebServer] [22m    at async DevServer.renderToResponseImpl [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:1962:32[90m)[39m
[2m[WebServer] [22m    at async DevServer.pipeImpl [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:922:25[90m)[39m
[2m[WebServer] [22m    at async NextNodeServer.handleCatchallRenderRequest [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/next-server.js:272:17[90m)[39m
[2m[WebServer] [22m    at async DevServer.handleRequestImpl [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:818:17[90m)[39m
[2m[WebServer] [22m    at async [90m/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/dev/next-dev-server.js:339:20
[2m[WebServer] [22m    at async Span.traceAsyncFn [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/trace/trace.js:154:20[90m)[39m
[2m[WebServer] [22m    at async DevServer.handleRequest [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/dev/next-dev-server.js:336:24[90m)[39m
[2m[WebServer] [22m    at async invokeRender [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/lib/router-server.js:179:21[90m)[39m
[2m[WebServer] [22m    at async handleRequest [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/lib/router-server.js:359:24[90m)[39m
[2m[WebServer] [22m    at async requestHandlerImpl [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/lib/router-server.js:383:13[90m)[39m
[2m[WebServer] [22m    at async Server.requestListener [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/lib/start-server.js:141:13[90m)[39m

[1A[2K[2m[WebServer] [22m [31m[1mâ¨¯[22m[39m uncaughtException: Error: the worker has exited
[2m[WebServer] [22m    at ThreadStream.write (webpack-internal:///(rsc)/./node_modules/[4mthread-stream[24m/index.js:238:19)
[2m[WebServer] [22m    at Pino.write (webpack-internal:///(rsc)/./node_modules/[4mpino[24m/lib/proto.js:243:10)
[2m[WebServer] [22m    at Pino.LOG [as error] (webpack-internal:///(rsc)/./node_modules/[4mpino[24m/lib/tools.js:65:21)
[2m[WebServer] [22m    at logApiError (webpack-internal:///(rsc)/./src/lib/api-logger.ts:12:53)
[2m[WebServer] [22m    at POST (webpack-internal:///(rsc)/./src/app/api/quotes/[id]/convert/route.ts:179:69)
[2m[WebServer] [22m    at async [90m/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
[2m[WebServer] [22m    at async eT.execute [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/compiled/next-server/app-route.runtime.dev.js:6:46851[90m)[39m
[2m[WebServer] [22m    at async eT.handle [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/compiled/next-server/app-route.runtime.dev.js:6:58760[90m)[39m
[2m[WebServer] [22m    at async doRender [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:1366:42[90m)[39m
[2m[WebServer] [22m    at async cacheEntry.responseCache.get.routeKind [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:1576:40[90m)[39m
[2m[WebServer] [22m    at async DevServer.renderToResponseWithComponentsImpl [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:1496:28[90m)[39m
[2m[WebServer] [22m    at async DevServer.renderPageComponent [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:1924:24[90m)[39m
[2m[WebServer] [22m    at async DevServer.renderToResponseImpl [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:1962:32[90m)[39m
[2m[WebServer] [22m    at async DevServer.pipeImpl [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:922:25[90m)[39m
[2m[WebServer] [22m    at async NextNodeServer.handleCatchallRenderRequest [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/next-server.js:272:17[90m)[39m
[2m[WebServer] [22m    at async DevServer.handleRequestImpl [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:818:17[90m)[39m
[2m[WebServer] [22m    at async [90m/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/dev/next-dev-server.js:339:20
[2m[WebServer] [22m    at async Span.traceAsyncFn [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/trace/trace.js:154:20[90m)[39m
[2m[WebServer] [22m    at async DevServer.handleRequest [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/dev/next-dev-server.js:336:24[90m)[39m
[2m[WebServer] [22m    at async invokeRender [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/lib/router-server.js:179:21[90m)[39m
[2m[WebServer] [22m    at async handleRequest [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/lib/router-server.js:359:24[90m)[39m
[2m[WebServer] [22m    at async requestHandlerImpl [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/lib/router-server.js:383:13[90m)[39m
[2m[WebServer] [22m    at async Server.requestListener [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/lib/start-server.js:141:13[90m)[39m

[1A[2K[2m[WebServer] [22m [31m[1mâ¨¯[22m[39m uncaughtException: Error: the worker has exited
[2m[WebServer] [22m    at ThreadStream.write (webpack-internal:///(rsc)/./node_modules/[4mthread-stream[24m/index.js:238:19)
[2m[WebServer] [22m    at Pino.write (webpack-internal:///(rsc)/./node_modules/[4mpino[24m/lib/proto.js:243:10)
[2m[WebServer] [22m    at Pino.LOG [as error] (webpack-internal:///(rsc)/./node_modules/[4mpino[24m/lib/tools.js:65:21)
[2m[WebServer] [22m    at logApiError (webpack-internal:///(rsc)/./src/lib/api-logger.ts:12:53)
[2m[WebServer] [22m    at POST (webpack-internal:///(rsc)/./src/app/api/quotes/[id]/convert/route.ts:179:69)
[2m[WebServer] [22m    at async [90m/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
[2m[WebServer] [22m    at async eT.execute [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/compiled/next-server/app-route.runtime.dev.js:6:46851[90m)[39m
[2m[WebServer] [22m    at async eT.handle [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/compiled/next-server/app-route.runtime.dev.js:6:58760[90m)[39m
[2m[WebServer] [22m    at async doRender [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:1366:42[90m)[39m
[2m[WebServer] [22m    at async cacheEntry.responseCache.get.routeKind [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:1576:40[90m)[39m
[2m[WebServer] [22m    at async DevServer.renderToResponseWithComponentsImpl [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:1496:28[90m)[39m
[2m[WebServer] [22m    at async DevServer.renderPageComponent [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:1924:24[90m)[39m
[2m[WebServer] [22m    at async DevServer.renderToResponseImpl [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:1962:32[90m)[39m
[2m[WebServer] [22m    at async DevServer.pipeImpl [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:922:25[90m)[39m
[2m[WebServer] [22m    at async NextNodeServer.handleCatchallRenderRequest [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/next-server.js:272:17[90m)[39m
[2m[WebServer] [22m    at async DevServer.handleRequestImpl [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/base-server.js:818:17[90m)[39m
[2m[WebServer] [22m    at async [90m/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/dev/next-dev-server.js:339:20
[2m[WebServer] [22m    at async Span.traceAsyncFn [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/trace/trace.js:154:20[90m)[39m
[2m[WebServer] [22m    at async DevServer.handleRequest [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/dev/next-dev-server.js:336:24[90m)[39m
[2m[WebServer] [22m    at async invokeRender [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/lib/router-server.js:179:21[90m)[39m
[2m[WebServer] [22m    at async handleRequest [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/lib/router-server.js:359:24[90m)[39m
[2m[WebServer] [22m    at async requestHandlerImpl [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/lib/router-server.js:383:13[90m)[39m
[2m[WebServer] [22m    at async Server.requestListener [90m(/home/monty/timbaos/[39mnode_modules/[4mnext[24m/dist/server/lib/start-server.js:141:13[90m)[39m

[1A[2K[chromium] â€º tests/e2e/order.spec.ts:93:9 â€º Order Validation â€º Order Edit Validation
Order edit (expected failure?) status: 400

[1A[2K[chromium] â€º tests/e2e/order.spec.ts:172:9 â€º Order Validation â€º Quote to Order Conversion Validation
Conversion Response Body: {
  "success": true,
  "order": {
    "id": "26102f72-2ca2-4a56-8166-f05d73032478",
    "orderNumber": "ORD-003045",
    "locationId": "ab858e11-8807-4970-b05d-2e1b82258472",
    "customerId": "3424db50-ea0e-4a42-b8cf-f8c066eebdae",
    "totalAmount": "43.25",
    "deliveryAddress": "Test quote from Playwright",
    "deliveryDate": null,
    "deliveryFee": "0",
    "salesRepId": "e294a908-ea12-412b-bdd3-1a9010d6e800",
    "createdAt": "2025-11-29T04:52:47.352Z",
    "updatedAt": "2025-11-29T04:52:47.351Z",
    "completedAt": null,
    "discountAmount": "0",
    "subtotal": "39.95",
    "taxAmount": "3.3",
    "status": "PENDING",
    "fulfillmentType": "PICKUP",
    "orderType": "QUOTE_CONVERSION",
    "paymentStatus": "PENDING",
    "deletedAt": null,
    "OrderItem": [
      {
        "id": "834cde88-df60-4c71-824b-a33358e1bc59",
        "orderId": "26102f72-2ca2-4a56-8166-f05d73032478",
        "productId": "ab432948-7d37-4c17-8bf9-59fcceeb3d46",
        "quantity": 5,
        "price": "7.99",
        "discount": "0",
        "Product": {
          "id": "ab432948-7d37-4c17-8bf9-59fcceeb3d46",
          "name": "1x6x8 Douglas Fir",
          "description": "Douglas Fir lumber for framing and construction",
          "sku": "LMB-1000",
          "basePrice": "7.99",
          "category": "Lumber",
          "uom": "EA",
          "isActive": true,
          "createdAt": "2025-11-28T21:14:21.565Z",
          "updatedAt": "2025-11-28T21:14:21.563Z",
          "categoryName": null,
          "image": null,
          "tag": null
        }
      }
    ],
    "Customer": {
      "id": "3424db50-ea0e-4a42-b8cf-f8c066eebdae",
      "name": "Joseph Thomas",
      "email": "customer100_joseph.thomas@email.com",
      "phone": "716-555-0100",
      "address": "7059 Park Ave, Cheektowaga, NY 14208",
      "accountNumber": null,
      "creditLimit": "0",
      "taxExempt": false,
      "taxId": null,
      "createdAt": "2025-11-28T21:14:23.803Z",
      "updatedAt": "2025-11-28T21:14:23.802Z",
      "loyaltyPoints": 708,
      "customerType": "RETAIL",
      "deletedAt": null,
      "paymentTermDays": 30,
      "creditHold": false,
      "earlyPaymentDiscount": null
    },
    "Location": {
      "id": "ab858e11-8807-4970-b05d-2e1b82258472",
      "code": "ORCHARDPARK",
      "name": "Bills Supplies - Orchard Park",
      "address": "5680 Abbott Road, Orchard Park, NY 14127",
      "phone": "716-555-0400",
      "email": "orchardpark@billssupplies.com",
      "timezone": "America/New_York",
      "isActive": true,
      "isWarehouse": false,
      "managerId": "a1faf7e8-8f71-4b0e-808b-09dc919db8dc",
      "createdAt": "2025-11-28T21:14:21.518Z",
      "updatedAt": "2025-11-28T21:14:21.517Z",
      "taxRate": "0.0825"
    }
  },
  "message": "Quote Q-1011 successfully converted to order ORD-003045"
}

[1A[2KConverted Order ID: 26102f72-2ca2-4a56-8166-f05d73032478

[1A[2K  2) [chromium] â€º tests/e2e/order.spec.ts:249:9 â€º Order Validation â€º Tax Calculation Validation â”€â”€â”€â”€

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeTruthy[2m()[22m

    Received: [31mfalse[39m

      286 |         // 3. Convert to order
      287 |         const convertRes = await helper.post(`/api/quotes/${quote.id}/convert`, {});
    > 288 |         expect(convertRes.ok()).toBeTruthy();
          |                                 ^
      289 |         const body = await convertRes.json();
      290 |         const orderId = body.order.id;
      291 |
        at /home/monty/timbaos/tests/e2e/order.spec.ts:288:33


[1A[2K[2m[WebServer] [22m
[2m[WebServer] [22mnode:internal/event_target:1105
[2m[WebServer] [22m  process.nextTick(() => { throw err; });
[2m[WebServer] [22m                           ^

[1A[2K[2m[WebServer] [22mError: Cannot find module '/home/monty/timbaos/.next/server/vendor-chunks/lib/worker.js'
[2m[WebServer] [22m[90m    at Module._resolveFilename (node:internal/modules/cjs/loader:1207:15)[39m
[2m[WebServer] [22m[90m    at Module._load (node:internal/modules/cjs/loader:1038:27)[39m
[2m[WebServer] [22m[90m    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:164:12)[39m
[2m[WebServer] [22m[90m    at MessagePort.<anonymous> (node:internal/main/worker_thread:192:26)[39m
[2m[WebServer] [22m[90m    at [nodejs.internal.kHybridDispatch] (node:internal/event_target:831:20)[39m
[2m[WebServer] [22m[90m    at MessagePort.<anonymous> (node:internal/per_context/messageport:23:28)[39m
[2m[WebServer] [22mEmitted 'error' event on Worker instance at:
[2m[WebServer] [22m[90m    at [kOnErrorMessage] (node:internal/worker:333:10)[39m
[2m[WebServer] [22m[90m    at [kOnMessage] (node:internal/worker:344:37)[39m
[2m[WebServer] [22m[90m    at MessagePort.<anonymous> (node:internal/worker:233:57)[39m
[2m[WebServer] [22m[90m    at [nodejs.internal.kHybridDispatch] (node:internal/event_target:831:20)[39m
[2m[WebServer] [22m[90m    at MessagePort.<anonymous> (node:internal/per_context/messageport:23:28)[39m
[2m[WebServer] [22m[90m    at MessagePort.callbackTrampoline (node:internal/async_hooks:130:17)[39m
[2m[WebServer] [22m[90m    at [kOnExit] (node:internal/worker:310:5)[39m
[2m[WebServer] [22m[90m    at Worker.<computed>.onexit (node:internal/worker:230:20)[39m
[2m[WebServer] [22m[90m    at Worker.callbackTrampoline (node:internal/async_hooks:130:17)[39m {
[2m[WebServer] [22m  code: [32m'MODULE_NOT_FOUND'[39m,
[2m[WebServer] [22m  requireStack: []
[2m[WebServer] [22m}
[2m[WebServer] [22m
[2m[WebServer] [22mNode.js v20.19.6

[1A[2K[2m[WebServer] [22m
[2m[WebServer] [22mnode:internal/event_target:1105
[2m[WebServer] [22m  process.nextTick(() => { throw err; });
[2m[WebServer] [22m                           ^

[1A[2K[2m[WebServer] [22mError: Cannot find module '/home/monty/timbaos/.next/server/vendor-chunks/lib/worker.js'
[2m[WebServer] [22m[90m    at Module._resolveFilename (node:internal/modules/cjs/loader:1207:15)[39m
[2m[WebServer] [22m[90m    at Module._load (node:internal/modules/cjs/loader:1038:27)[39m
[2m[WebServer] [22m[90m    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:164:12)[39m
[2m[WebServer] [22m[90m    at MessagePort.<anonymous> (node:internal/main/worker_thread:192:26)[39m
[2m[WebServer] [22m[90m    at [nodejs.internal.kHybridDispatch] (node:internal/event_target:831:20)[39m
[2m[WebServer] [22m[90m    at MessagePort.<anonymous> (node:internal/per_context/messageport:23:28)[39m
[2m[WebServer] [22mEmitted 'error' event on Worker instance at:
[2m[WebServer] [22m[90m    at [kOnErrorMessage] (node:internal/worker:333:10)[39m
[2m[WebServer] [22m[90m    at [kOnMessage] (node:internal/worker:344:37)[39m
[2m[WebServer] [22m[90m    at MessagePort.<anonymous> (node:internal/worker:233:57)[39m
[2m[WebServer] [22m[90m    at [nodejs.internal.kHybridDispatch] (node:internal/event_target:831:20)[39m
[2m[WebServer] [22m[90m    at MessagePort.<anonymous> (node:internal/per_context/messageport:23:28)[39m
[2m[WebServer] [22m[90m    at MessagePort.callbackTrampoline (node:internal/async_hooks:130:17)[39m
[2m[WebServer] [22m[90m    at [kOnExit] (node:internal/worker:310:5)[39m
[2m[WebServer] [22m[90m    at Worker.<computed>.onexit (node:internal/worker:230:20)[39m
[2m[WebServer] [22m[90m    at Worker.callbackTrampoline (node:internal/async_hooks:130:17)[39m {
[2m[WebServer] [22m  code: [32m'MODULE_NOT_FOUND'[39m,
[2m[WebServer] [22m  requireStack: []
[2m[WebServer] [22m}
[2m[WebServer] [22m
[2m[WebServer] [22mNode.js v20.19.6

[1A[2K  2 failed
    [chromium] â€º tests/e2e/order.spec.ts:46:9 â€º Order Validation â€º Order Status Transitions (Confirm) 
    [chromium] â€º tests/e2e/order.spec.ts:249:9 â€º Order Validation â€º Tax Calculation Validation â”€â”€â”€â”€â”€
  6 passed (2.3m)

[36m  Serving HTML report at http://localhost:50577. Press Ctrl+C to quit.[39m
