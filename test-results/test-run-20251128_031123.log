â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Bill's Supplies - Regression Test Suite          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Started at: Fri Nov 28 03:11:23 CST 2025
Server URL: http://localhost:3000
Log file: ./test-results/test-run-20251128_031123.log

[1;33mChecking server status...[0m
[0;32mâœ“ Server is running[0m

==================================================
[0;34mRunning: RBAC Tests[0m
==================================================
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  RBAC Regression Test Suite           â•‘
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—


=========================================
TEST: Unauthenticated User Access
=========================================
[1;33mâ„¹ INFO[0m: Testing GET /api/analytics without auth
[0;32mâœ“ PASS[0m: Unauthenticated user correctly blocked from analytics
[1;33mâ„¹ INFO[0m: Testing GET /api/quotes without auth
[0;32mâœ“ PASS[0m: Unauthenticated user correctly blocked from quotes

=========================================
TEST: Admin User API Access
=========================================
[1;33mâ„¹ INFO[0m: Logging in as admin@billssupplies.com
[0;32mâœ“ PASS[0m: Admin login successful
[1;33mâ„¹ INFO[0m: Testing GET /api/analytics
[0;32mâœ“ PASS[0m: Admin can access analytics endpoint
[1;33mâ„¹ INFO[0m: Testing GET /api/quotes
[0;32mâœ“ PASS[0m: Admin can access quotes endpoint (found 10 quotes)

=========================================
TEST: Sales User API Access
=========================================
[1;33mâ„¹ INFO[0m: Logging in as sales1@billssupplies.com
[0;32mâœ“ PASS[0m: Sales login successful
[1;33mâ„¹ INFO[0m: Testing GET /api/analytics (should be blocked)
[0;32mâœ“ PASS[0m: Sales user correctly blocked from analytics
[1;33mâ„¹ INFO[0m: Testing GET /api/quotes (should only see own quotes)
[0;32mâœ“ PASS[0m: Sales can access quotes endpoint (found 5 quotes)
[0;32mâœ“ PASS[0m: Sales user sees fewer quotes than admin (5 < 10) - filtering works!

=========================================
TEST: Manager User API Access
=========================================
[1;33mâ„¹ INFO[0m: Logging in as amherst.manager@billssupplies.com
[0;32mâœ“ PASS[0m: Manager login successful
[1;33mâ„¹ INFO[0m: Testing GET /api/analytics (should have access)
[0;32mâœ“ PASS[0m: Manager can access analytics endpoint
[1;33mâ„¹ INFO[0m: Testing GET /api/quotes (should see location-filtered quotes)
[0;32mâœ“ PASS[0m: Manager can access quotes endpoint (found 10 quotes)
[0;32mâœ“ PASS[0m: Manager sees more/equal quotes than sales (10 >= 5)

=========================================
TEST: Quote Creation Permissions
=========================================
[1;33mâ„¹ INFO[0m: This test validates quote creation permissions
[0;32mâœ“ PASS[0m: Quote creation test prepared (requires seed data IDs)

=========================================
TEST SUMMARY
=========================================
[0;32mPassed: 14[0m
[0;31mFailed: 0[0m
=========================================
[0;32mâœ“ ALL TESTS PASSED[0m
[0;32mâœ“ RBAC Tests PASSED[0m
==================================================
[0;34mRunning: Quote Validation Tests[0m
==================================================
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Quote Validation Regression Tests                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


=========================================
TEST: Quote Creation Validation
=========================================
[1;33mâ„¹ INFO[0m: Fetching test data from database...
[0;34mDEBUG[0m: Test data: {"customerId":"a706cb22-e099-4886-abb9-16bb17d8a81f","locationId":"f4d0250d-1099-4b65-b56c-0861c66f01c8","productId":"38f0ecf1-22e2-4f23-b611-0a86fbda2195","userId":"bb0f2f06-a527-45e7-b098-8f26ebe624fa","productPrice":"14.99"}
[1;33mâ„¹ INFO[0m: Logging in as sales1@billssupplies.com
[0;32mâœ“ PASS[0m: Sales user login successful
[1;33mâ„¹ INFO[0m: Creating a new quote
[0;32mâœ“ PASS[0m: Quote created successfully: Q-1018

=========================================
TEST: Quote Total Calculation Validation
=========================================
[0;34mDEBUG[0m: Quote data: {"id":"de5be065-34b4-431b-9306-d5e2a20a0ad6","quoteNumber":"Q-SEED-001","subtotal":"100","taxAmount":"8.25","discountAmount":"0","deliveryFee":"0","totalAmount":"108.25","itemCount":1,"taxExempt":false,"taxRate":"0.0825"}
[1;33mâ„¹ INFO[0m: Quote totals - Subtotal: 100, Tax: 8.25, Discount: 0, Delivery: 0, Total: 108.25
[0;32mâœ“ PASS[0m: Quote total calculation is correct (108.25 = 108.25)

=========================================
TEST: Quote Tax Calculation
=========================================
[1;33mâ„¹ INFO[0m: No tax-exempt customer quotes found to test
[0;32mâœ“ PASS[0m: Quote tax calculation is correct (100 Ã— 0.0825 = 8.25)

=========================================
TEST: Quote Delivery Fee Calculation
=========================================
[1;33mâ„¹ INFO[0m: Delivery fees - With delivery: 0, Without: 3
[0;32mâœ“ PASS[0m: Quote delivery fees are being calculated and tracked

=========================================
TEST: Quote Status Transitions
=========================================
[1;33mâ„¹ INFO[0m: Quote status distribution - DRAFT: 0, PENDING: 3, SENT: 0, ACCEPTED: 0, REJECTED: 0, EXPIRED: 0
[0;32mâœ“ PASS[0m: Quote statuses are being tracked correctly

=========================================
TEST: Quote Validity Period
=========================================
[1;33mâ„¹ INFO[0m: Quote validity - Valid: 3, Expired: 0
[0;32mâœ“ PASS[0m: Quote validity periods are being tracked correctly
[1;33mâ„¹ INFO[0m: No expired quotes found to test conversion blocking

=========================================
TEST: Quote Number Generation
=========================================
[1;33mâ„¹ INFO[0m: Quote numbers - Total: 3
[0;32mâœ“ PASS[0m: All quote numbers are unique

=========================================
TEST: Quote Access Permissions
=========================================
[1;33mâ„¹ INFO[0m: Testing sales user quote filtering
[0;32mâœ“ PASS[0m: Sales user can access quotes endpoint (found 10 quotes)
[1;33mâ„¹ INFO[0m: Testing admin user quote access
[0;32mâœ“ PASS[0m: Admin can access quotes endpoint (found 15 quotes)
[0;32mâœ“ PASS[0m: Admin sees more/equal quotes than sales user (15 >= 10)
[1;33mâ„¹ INFO[0m: Testing unauthenticated quote access
[0;32mâœ“ PASS[0m: Unauthenticated users correctly blocked from quotes

=========================================
TEST: Quote to Order Conversion
=========================================
[1;33mâ„¹ INFO[0m: Testing conversion for quote: Q-SEED-001 (status: PENDING)
[0;32mâœ“ PASS[0m: Quote Q-SEED-001 converted to order successfully
[0;32mâœ“ PASS[0m: Converted order has correct total (108.25)
[0;32mâœ“ PASS[0m: Quote status correctly updated to ACCEPTED
[0;32mâœ“ PASS[0m: Quote correctly linked to order

=========================================
TEST: Quote Conversion Validation Rules
=========================================
[1;33mâ„¹ INFO[0m: Testing that already-converted quotes cannot be re-converted
[0;32mâœ“ PASS[0m: Already-converted quotes are correctly blocked from re-conversion
[1;33mâ„¹ INFO[0m: No rejected quotes found to test
[1;33mâ„¹ INFO[0m: No draft quotes found to test

=========================================
TEST SUMMARY
=========================================
[0;32mPassed: 17[0m
[0;31mFailed: 0[0m
=========================================
[0;32mâœ“ ALL TESTS PASSED[0m
[0;32mâœ“ Quote Validation Tests PASSED[0m
==================================================
[0;34mRunning: Order Validation Tests[0m
==================================================
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Order Validation Regression Tests    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


=========================================
TEST: Order Creation Validation
=========================================
[1;33mâ„¹ INFO[0m: Fetching test data from database...
[0;34mDEBUG[0m: Test data: {"customerId":"a706cb22-e099-4886-abb9-16bb17d8a81f","locationId":"f4d0250d-1099-4b65-b56c-0861c66f01c8","productId":"38f0ecf1-22e2-4f23-b611-0a86fbda2195","userId":"bb0f2f06-a527-45e7-b098-8f26ebe624fa","productPrice":"14.99"}
[1;33mâ„¹ INFO[0m: Logging in as admin@billssupplies.com
[0;32mâœ“ PASS[0m: Admin login successful
[1;33mâ„¹ INFO[0m: Testing order creation via quote conversion
[0;32mâœ“ PASS[0m: Order creation test prepared (using existing conversion flow)

=========================================
TEST: Order Total Calculation Validation
=========================================
[1;33mâ„¹ INFO[0m: Testing order total calculations with various scenarios
[0;34mDEBUG[0m: Order data: {"id":"8ca54659-794a-47b5-8185-585a826bf655","subtotal":"2104.91","taxAmount":"173.65","discountAmount":"105.25","deliveryFee":"22","totalAmount":"2195.32","itemCount":4,"taxExempt":false,"taxRate":"0.0825"}
[1;33mâ„¹ INFO[0m: Order totals - Subtotal: 2104.91, Tax: 173.65, Discount: 105.25, Delivery: 22, Total: 2195.32
[0;31mâœ— FAIL[0m: Order total calculation mismatch (expected: 2195.31, got: 2195.32)

=========================================
TEST: Tax Calculation Validation
=========================================
[0;32mâœ“ PASS[0m: Tax-exempt customers have zero tax amount
[0;31mâœ— FAIL[0m: Tax calculation mismatch (expected: 173.66, got: 173.65)

=========================================
TEST: Order Payment Status Validation
=========================================
[1;33mâ„¹ INFO[0m: Payment status distribution - PENDING: 769, PAID: 2232, PARTIAL: 0
[0;32mâœ“ PASS[0m: Order payment statuses are being tracked correctly

=========================================
TEST: Order Edit Validation
=========================================
[1;33mâ„¹ INFO[0m: Testing order edit for order: 8ca54659-794a-47b5-8185-585a826bf655
[1;33mâ„¹ INFO[0m: Attempting to update quantity from 22 to 23
[0;32mâœ“ PASS[0m: PENDING order can be edited successfully
[1;33mâ„¹ INFO[0m: Testing that PROCESSING orders cannot be edited
[0;32mâœ“ PASS[0m: PROCESSING orders are correctly blocked from editing

=========================================
TEST: Order Status Transitions
=========================================
[1;33mâ„¹ INFO[0m: Testing status transition for order: bd6234d3-aec4-459f-8d7f-b06da2b01815
[1;33mâ„¹ INFO[0m: Testing PENDING -> CONFIRMED transition via /api/orders/bd6234d3-aec4-459f-8d7f-b06da2b01815/confirm
[0;32mâœ“ PASS[0m: Order confirmation successful (PENDING -> PROCESSING)
[0;32mâœ“ PASS[0m: Order status correctly updated to PROCESSING in database

=========================================
TEST: Order Cancellation Validation
=========================================
[1;33mâ„¹ INFO[0m: Testing order cancellation for order: ed54b12f-6430-4471-b7e8-c5d21b165406
[0;32mâœ“ PASS[0m: Order cancellation successful
[0;32mâœ“ PASS[0m: Order status correctly updated to CANCELLED in database

=========================================
TEST: Quote to Order Conversion Validation
=========================================
[1;33mâ„¹ INFO[0m: Testing quote to order conversion for quote: Q-SEED-002
[0;32mâœ“ PASS[0m: Quote conversion to order successful
[0;32mâœ“ PASS[0m: Converted order has correct total amount (216.5)
[0;32mâœ“ PASS[0m: Quote status correctly updated to ACCEPTED

=========================================
TEST SUMMARY
=========================================
[0;32mPassed: 13[0m
[0;31mFailed: 2[0m
=========================================
[0;31mâœ— SOME TESTS FAILED[0m
[0;31mâœ— Order Validation Tests FAILED[0m
==================================================
[0;34mRunning: Inventory Validation Tests[0m
==================================================
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Inventory Validation Regression Testsâ•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


=========================================
TEST: Inventory Levels Tracking
=========================================
[1;33mâ„¹ INFO[0m: Logging in as admin@billssupplies.com
[0;32mâœ“ PASS[0m: Admin login successful
[0;34mDEBUG[0m: Location data: {"locationId":"f4d0250d-1099-4b65-b56c-0861c66f01c8","locationName":"Bills Supplies - Orchard Park","productId":"4e8837e9-f39e-42f1-90f4-7a4a891b2547","productName":"Faucet","stockLevel":25}
[1;33mâ„¹ INFO[0m: Testing inventory for location: Bills Supplies - Orchard Park (Stock: 25)
[0;32mâœ“ PASS[0m: Inventory data retrieved successfully (found 400 items)
[0;32mâœ“ PASS[0m: No negative stock levels found

=========================================
TEST: Low Stock Detection
=========================================
[1;33mâ„¹ INFO[0m: Found 5 items with low stock
[0;32mâœ“ PASS[0m: Low stock detection is working (found 5 items)

=========================================
TEST: Inventory Deduction After POS Sale
=========================================
[1;33mâ„¹ INFO[0m: Current stock level: 168
[1;33mâ„¹ INFO[0m: Attempting POS checkout with 2 items
[0;32mâœ“ PASS[0m: POS checkout successful
[0;32mâœ“ PASS[0m: Inventory correctly deducted (was: 168, now: 166, expected: 166)

=========================================
TEST: Multi-Location Inventory
=========================================
[1;33mâ„¹ INFO[0m: Product found in 5 locations
[0;32mâœ“ PASS[0m: Multi-location inventory tracking is working (found in 5 locations)

=========================================
TEST: Inventory Query Performance
=========================================
[1;33mâ„¹ INFO[0m: Inventory query took 44ms
[0;32mâœ“ PASS[0m: Inventory query performance is acceptable (44ms)

=========================================
TEST SUMMARY
=========================================
[0;32mPassed: 8[0m
[0;31mFailed: 0[0m
=========================================
[0;32mâœ“ ALL TESTS PASSED[0m
[0;32mâœ“ Inventory Validation Tests PASSED[0m
==================================================
[0;34mRunning: POS Validation Tests[0m
==================================================
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  POS Validation Regression Tests      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


=========================================
TEST: POS Checkout Flow
=========================================
[1;33mâ„¹ INFO[0m: Logging in as admin@billssupplies.com
[0;32mâœ“ PASS[0m: Admin login successful
[0;34mDEBUG[0m: Test data: {"locationId":"f4d0250d-1099-4b65-b56c-0861c66f01c8","customerId":"a706cb22-e099-4886-abb9-16bb17d8a81f","productId":"38f0ecf1-22e2-4f23-b611-0a86fbda2195","price":"14.99"}
[1;33mâ„¹ INFO[0m: Testing POS checkout for product: 
[0;32mâœ“ PASS[0m: POS checkout successful: ORD-1014
[0;32mâœ“ PASS[0m: Order type correctly set to POS
[0;32mâœ“ PASS[0m: Payment status correctly set to PAID
[0;32mâœ“ PASS[0m: Order status correctly set to COMPLETED

=========================================
TEST: Walk-in Customer Creation
=========================================
[0;32mâœ“ PASS[0m: Walk-in customer created: Walk-in 1764321105604
[0;32mâœ“ PASS[0m: Walk-in customer name format is correct

=========================================
TEST: Multiple Payment Methods (Split)
=========================================
[1;33mâ„¹ INFO[0m: No suitable test data found
[0;32mâœ“ PASS[0m: Multiple payment test skipped (no data)

=========================================
TEST: POS Tax Calculation
=========================================
[1;33mâ„¹ INFO[0m: No taxable customer found
[0;32mâœ“ PASS[0m: POS tax test skipped (no taxable customer)

=========================================
TEST: POS Products Endpoint
=========================================
[0;32mâœ“ PASS[0m: POS products endpoint accessible (found 50 products)
[0;32mâœ“ PASS[0m: Products include required fields (name, price)

=========================================
TEST SUMMARY
=========================================
[0;32mPassed: 11[0m
[0;31mFailed: 0[0m
=========================================
[0;32mâœ“ ALL TESTS PASSED[0m
[0;32mâœ“ POS Validation Tests PASSED[0m
==================================================
[0;34mRunning: Customer Validation Tests[0m
==================================================
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Customer Validation Regression Tests â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


=========================================
TEST: Customer Types (RETAIL vs WHOLESALE)
=========================================
[1;33mâ„¹ INFO[0m: Logging in as admin@billssupplies.com
[1;33mâ„¹ INFO[0m: Customer types - RETAIL: 152, WHOLESALE: 60
[0;32mâœ“ PASS[0m: Customer types are being tracked correctly

=========================================
TEST: Tax-Exempt Customer Status
=========================================
[1;33mâ„¹ INFO[0m: Tax status - Exempt: 16, Non-exempt: 236
[0;32mâœ“ PASS[0m: Tax-exempt status is being tracked correctly

=========================================
TEST: Customer Listing
=========================================
[0;32mâœ“ PASS[0m: Customer listing accessible (found 10 customers)
[0;32mâœ“ PASS[0m: Customers include required fields (name, email)

=========================================
TEST: Customer Email Uniqueness
=========================================
PrismaClientValidationError: 
Invalid `prisma.customer.findMany()` invocation:

{
  where: {
    email: {
+     not: String
    }
  },
  select: {
    email: true
  }
}

Argument `not` must not be null.
    at wn (/home/monty/spruce-killer/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/monty/spruce-killer/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/monty/spruce-killer/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/monty/spruce-killer/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/monty/spruce-killer/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async [eval]:26:23 {
  clientVersion: '5.22.0'
}
[0;31mâœ— FAIL[0m: Could not fetch duplicate email data

=========================================
TEST: Walk-in Customer Generation
=========================================
[0;32mâœ“ PASS[0m: Walk-in customer created successfully: Walk-in 1764321108593
[0;32mâœ“ PASS[0m: Walk-in customer saved to database
[0;32mâœ“ PASS[0m: Walk-in customer type is RETAIL

=========================================
TEST SUMMARY
=========================================
[0;32mPassed: 7[0m
[0;31mFailed: 1[0m
=========================================
[0;31mâœ— SOME TESTS FAILED[0m
[0;31mâœ— Customer Validation Tests FAILED[0m
==================================================
[0;34mRunning: Product Validation Tests[0m
==================================================
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Product Validation Regression Tests  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


=========================================
TEST: Product Listing
=========================================
[1;33mâ„¹ INFO[0m: Logging in as sales1@billssupplies.com
[0;32mâœ“ PASS[0m: Product listing accessible (found 50 products)
[0;31mâœ— FAIL[0m: Products missing required fields
[0;34mDEBUG[0m: Response: [{"id":"00ce2967-454f-4394-8aca-7cd1984cdc11","name":"Teflon Tape","sku":"PLUMB-1174","price":40.99,"stockLevel":106},{"id":"018a8ecf-6f20-406b-ab6a-da6aa459177b","name":"Romex Wire 14/2","sku":"ELEC-1159","price":4.99,"stockLevel":228},{"id":"03a47c79-1ed7-489b-b6c6-7ae586095a3c","name":"Breaker 20A","sku":"ELEC-1147","price":15.99,"stockLevel":74},{"id":"03b7f502-d21d-44c7-9c67-7dcbab8586e0","name":"2x8x10 Cedar","sku":"LMB-1007","price":9.99,"stockLevel":54},{"id":"0628069d-a582-4eb4-a3ba-6cb26f09a5e3","name":"2x6x10 Pressure Treated","sku":"LMB-1023","price":13.99,"stockLevel":53},{"id":"06572b8d-6b01-4353-b90e-0714ee3dd9a7","name":"Varnish Paint - Flat (Gallon)","sku":"PNT-1139","price":35.99,"stockLevel":291},{"id":"06b53aff-0419-4586-9884-1aa9dbc3c4bd","name":"Lag Screws 1\" (50lb)","sku":"HW-1058","price":26.99,"stockLevel":138},{"id":"0b2f04dc-565f-469b-a9ba-bc8d2eac891c","name":"Electrical Tape","sku":"ELEC-1154","price":84.99,"stockLevel":179},{"id":"107b4597-e13b-4a99-8fa0-8b64d7c9ef99","name":"4x8 3/4\" CDX","sku":"PLY-1042","price":88.99,"stockLevel":183},{"id":"18df0cc2-88e3-4b1c-9e98-178062a8e909","name":"Framing Nails 2\" (1lb)","sku":"HW-1083","price":47.99,"stockLevel":153},{"id":"19962f60-2784-4d6e-b89a-25f9fd0d02f7","name":"Insulation R-19 Rolls","sku":"INSUL-1199","price":36.99,"stockLevel":141},{"id":"19c159ec-9057-4cd1-95e4-31d5ce74a0d4","name":"Professional Utility Knife","sku":"TOOL-1094","price":146.99,"stockLevel":76},{"id":"19cab9ce-f5c4-43fa-aa3f-213d831a5e9e","name":"Electrical Tape","sku":"ELEC-1155","price":65.99,"stockLevel":43},{"id":"1b6b80af-dd68-42a0-adb8-c005cdfc919f","name":"2x8x10 Cedar","sku":"LMB-1006","price":25.99,"stockLevel":100},{"id":"1b8b2c09-6c83-47e9-9f83-00960f96db6f","name":"Drain Trap","sku":"PLUMB-1162","price":272.99,"stockLevel":55},{"id":"1c2b1e43-1b00-4d71-9ec0-55a1728f6d92","name":"Interior Paint - Satin (Gallon)","sku":"PNT-1136","price":41.99,"stockLevel":171},{"id":"1ca8deea-b930-4183-af34-ef24876abf11","name":"Exterior Paint - Satin (Gallon)","sku":"PNT-1120","price":26.99,"stockLevel":155},{"id":"1dea4685-c5f4-4bc2-b830-385dc1b96758","name":"Primer Paint - Flat (Gallon)","sku":"PNT-1126","price":73.99,"stockLevel":153},{"id":"1e573b01-837b-4ac6-bf43-4d074cfebc07","name":"Toilet","sku":"PLUMB-1179","price":118.99,"stockLevel":114},{"id":"1fdad110-ad61-4222-891b-cb0017e82b47","name":"4x8 5/8\" Birch","sku":"PLY-1032","price":83.99,"stockLevel":113},{"id":"20b37235-69ec-481b-849b-236e148934da","name":"Heavy Duty Chisel Set","sku":"TOOL-1096","price":73.99,"stockLevel":227},{"id":"20da1078-ae8b-4f83-95a5-3ecd8903b48a","name":"Junction Box","sku":"ELEC-1151","price":53.99,"stockLevel":153},{"id":"210a2664-9c1d-430c-a26d-0e02586fcef7","name":"Finish Nails 1\" (1lb)","sku":"HW-1088","price":72.99,"stockLevel":210},{"id":"21d1ca6b-3480-45c2-bb74-0a3e4a2d780c","name":"2x10x12 Pressure Treated","sku":"LMB-1024","price":33.99,"stockLevel":189},{"id":"23f6c99e-8076-4438-8f71-0eaa73e5ada9","name":"Concrete Mix 80lb","sku":"CONC-1182","price":32.99,"stockLevel":98},{"id":"2451f970-94dd-4845-a0ce-b846f95a6bad","name":"Wire Nuts","sku":"ELEC-1145","price":40.99,"stockLevel":77},{"id":"26d2cd3b-2639-4d82-b6c3-87c783733e80","name":"PVC Pipe 1/2\"","sku":"PLUMB-1173","price":4.99,"stockLevel":296},{"id":"277a6fe7-02fe-4de4-b4be-a49ea9fac436","name":"4x8 3/4\" Particle Board","sku":"PLY-1054","price":76.99,"stockLevel":233},{"id":"2899d8ea-b543-4a26-880e-c7eec2e33492","name":"4x8 1/2\" OSB","sku":"PLY-1045","price":39.99,"stockLevel":279},{"id":"2aaaaf24-c2f3-4579-b114-cb601791245e","name":"Electrical Tape","sku":"ELEC-1146","price":28.99,"stockLevel":164},{"id":"2b404de4-c9e7-4998-adba-346ad39e6af0","name":"4x4x8 Spruce","sku":"LMB-1001","price":16.99,"stockLevel":72},{"id":"2e8ff029-141e-4963-aa39-1c2d3f78b85b","name":"Wood Screws 8d (50lb)","sku":"HW-1071","price":33.99,"stockLevel":244},{"id":"2f422d6d-7830-4336-9ec4-597801b25aec","name":"2x4x8 Oak","sku":"LMB-1005","price":18.99,"stockLevel":229},{"id":"30571ea5-c69e-4586-8724-46f3e685602d","name":"Pro Square","sku":"TOOL-1101","price":74.99,"stockLevel":31},{"id":"30a5ac47-89af-4b66-8222-dfeceb1e51b9","name":"Finish Nails 3\" (5lb)","sku":"HW-1078","price":21.99,"stockLevel":21},{"id":"34b14aac-507c-4941-97ae-20b0f4458528","name":"4x8 1/4\" MDF","sku":"PLY-1037","price":55.99,"stockLevel":96},{"id":"35cefc86-e770-4c89-9ffc-1f9cacb19d8d","name":"Brad Nails 16d (25lb)","sku":"HW-1084","price":49.99,"stockLevel":139},{"id":"38f0ecf1-22e2-4f23-b611-0a86fbda2195","name":"2x8x10 Pressure Treated","sku":"LMB-1000","price":14.99,"stockLevel":163},{"id":"3956f6dc-b749-49c9-bec9-5b3e401e734f","name":"Standard Chisel Set","sku":"TOOL-1097","price":76.99,"stockLevel":184},{"id":"3a5e7ba9-04b0-4a3a-ae5f-57ecc3a23a64","name":"Breaker 20A","sku":"ELEC-1157","price":71.99,"stockLevel":247},{"id":"3ab24bd5-624b-4a04-8cc1-ce2eab42c28a","name":"Outlet","sku":"ELEC-1158","price":24.99,"stockLevel":144},{"id":"3c92b72a-2251-413f-acdc-65a65c5e8284","name":"4x8 3/4\" Particle Board","sku":"PLY-1040","price":83.99,"stockLevel":130},{"id":"3ddf2ee9-21d8-4a02-b99b-f0ab21c548a1","name":"4x8 1/2\" OSB","sku":"PLY-1034","price":91.99,"stockLevel":133},{"id":"3eb5b865-5e47-4001-9994-b72e8c48a5a1","name":"PVC Pipe 1/2\"","sku":"PLUMB-1176","price":86.99,"stockLevel":196},{"id":"3f144ed3-42de-4608-833d-c5423ba5f113","name":"Professional Level","sku":"TOOL-1095","price":290.99,"stockLevel":267},{"id":"40ef72f6-48ee-4692-9403-d472baad7c88","name":"2x10x12 Spruce","sku":"LMB-1003","price":22.99,"stockLevel":158},{"id":"415c311e-172c-48aa-93c3-464cb4b7e5ba","name":"Rebar 60lb","sku":"CONC-1187","price":43.99,"stockLevel":259},{"id":"42148b00-4c3d-4ef9-8298-4266a3b3b2e7","name":"Drywall Screws 2\" (50lb)","sku":"HW-1056","price":22.99,"stockLevel":23},{"id":"426a163e-c682-4c63-bcbd-aa29b6642d78","name":"Heavy Duty Chisel Set","sku":"TOOL-1106","price":141.99,"stockLevel":78},{"id":"439a42c2-cf63-4e66-8a96-545e116ff9bd","name":"Drywall Screws 16d (25lb)","sku":"HW-1057","price":15.99,"stockLevel":165}]

=========================================
TEST: Product Categories
=========================================
[1;33mâ„¹ INFO[0m: Found 9 unique categories across 200 products
[0;32mâœ“ PASS[0m: Product categories are being tracked (9 categories)

=========================================
TEST: SKU Uniqueness
=========================================
[0;32mâœ“ PASS[0m: No duplicate SKUs found

=========================================
TEST: Active/Inactive Product Status
=========================================
[1;33mâ„¹ INFO[0m: Product status - Active: 200, Inactive: 0
[0;32mâœ“ PASS[0m: Product active status is being tracked correctly

=========================================
TEST: Product Pricing
=========================================
[1;33mâ„¹ INFO[0m: Product has base price: 14.99
[0;32mâœ“ PASS[0m: Product has valid base price (14.99)
[0;32mâœ“ PASS[0m: Product cost tracking is available

=========================================
TEST: Location-Specific Pricing
=========================================
[1;33mâ„¹ INFO[0m: No location-specific pricing found (using base prices only)

=========================================
TEST SUMMARY
=========================================
[0;32mPassed: 6[0m
[0;31mFailed: 1[0m
=========================================
[0;31mâœ— SOME TESTS FAILED[0m
[0;31mâœ— Product Validation Tests FAILED[0m
==================================================
[0;34mRunning: Audit Log Validation Tests[0m
==================================================
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Audit Log Validation Regression Testsâ•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


=========================================
TEST: Quote Audit Log Retrieval
=========================================
[1;33mâ„¹ INFO[0m: Logging in as admin@billssupplies.com
[1;33mâ„¹ INFO[0m: Testing audit logs for quote: 15883d13-a681-4015-9442-d6fa3c6731ff
[0;32mâœ“ PASS[0m: Audit logs retrieved successfully (found 0 logs)
[1;33mâ„¹ INFO[0m: Skipping field validation (no logs found)

=========================================
TEST: Order Audit Log Retrieval
=========================================
[1;33mâ„¹ INFO[0m: Testing audit logs for order: 31d1a240-dc2d-43c1-b286-d14ae5359c83
[0;32mâœ“ PASS[0m: Order audit logs retrieved successfully (found 0 logs)

=========================================
TEST: User Attribution in Audit Logs
=========================================
[0;32mâœ“ PASS[0m: Audit logs include user attribution (5 logs with users)

=========================================
TEST: Audit Log Timestamp Accuracy
=========================================
[0;32mâœ“ PASS[0m: Audit log timestamps are being recorded (found 8 recent logs)

=========================================
TEST: Audit Log Action Types
=========================================
[1;33mâ„¹ INFO[0m: Found 4 unique action types across 8 logs
[0;32mâœ“ PASS[0m: Audit logs capture various action types (4 types)

=========================================
TEST SUMMARY
=========================================
[0;32mPassed: 5[0m
[0;31mFailed: 0[0m
=========================================
[0;32mâœ“ ALL TESTS PASSED[0m
[0;32mâœ“ Audit Log Validation Tests PASSED[0m
==================================================
[0;34mRunning: Export Validation Tests[0m
==================================================
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Export Validation Regression Tests   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


=========================================
TEST: Export Endpoint Access
=========================================
[1;33mâ„¹ INFO[0m: Logging in as admin@billssupplies.com
[0;32mâœ“ PASS[0m: Admin login successful
[1;33mâ„¹ INFO[0m: Export endpoint status: 400 (may not be implemented yet)

=========================================
TEST: Export RBAC (Role-Based Access)
=========================================
[1;33mâ„¹ INFO[0m: Testing export access as sales user
[1;33mâ„¹ INFO[0m: Export endpoint returned status: 400
[1;33mâ„¹ INFO[0m: Testing export access as manager
[1;33mâ„¹ INFO[0m: Manager export access status: 400

=========================================
TEST: Analytics Data for Export
=========================================
[0;32mâœ“ PASS[0m: Analytics data is accessible for export
[0;32mâœ“ PASS[0m: Analytics data includes key exportable metrics

=========================================
TEST: Export Data Completeness
=========================================
[1;33mâ„¹ INFO[0m: Data available for export - Quotes: 3, Orders: 3004, Customers: 253, Products: 200
[0;32mâœ“ PASS[0m: All data types available for export

=========================================
TEST: Export Performance
=========================================
[1;33mâ„¹ INFO[0m: Export/analytics query took 458ms
[0;32mâœ“ PASS[0m: Export performance is acceptable (458ms < 10s)

=========================================
TEST SUMMARY
=========================================
[0;32mPassed: 5[0m
[0;31mFailed: 0[0m
=========================================
[0;32mâœ“ ALL TESTS PASSED[0m
[0;32mâœ“ Export Validation Tests PASSED[0m
==================================================
[0;34mRunning: API Conversion Tests[0m
==================================================
Logging in as admin...
Testing conversion of quote: 15883d13-a681-4015-9442-d6fa3c6731ff
[0;32mâœ“ Quote conversion successful[0m
[0;32mâœ“ API Conversion Tests PASSED[0m

==================================================
TEST SUITE SUMMARY
==================================================
[0;32mTest Suites Passed: 7[0m
[0;31mTest Suites Failed: 3[0m
==================================================
Completed at: Fri Nov 28 03:11:58 CST 2025

[0;31mâœ— SOME TEST SUITES FAILED[0m

Please review the test output above or check: ./test-results/test-run-20251128_031123.log
